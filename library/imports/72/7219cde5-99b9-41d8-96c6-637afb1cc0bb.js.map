{"version":3,"sources":["assets\\Script\\GhostArrest\\GhostArrest.js"],"names":["cc","Class","Component","properties","gatetime","Grade","NewCoverPrefab","Prefab","DKPrefab","TimeLeft","Node","RemainingSpace","IntegralNode","onLoad","trap","matrix_X_max","matrix_Y_max","matrix","x","y","setX","setY","push","matrix_max","Number","length","traplist","i","suijimake","Math","floor","random","thenode","find","openlist","winisopen","getComponent","Label","string","String","start","NewCover","instantiate","parent","setPosition","theON","the","schedule","macro","REPEAT_FOREVER","on","EventType","TOUCH_START","event","nodegetLocation","convertToNodeSpaceAR","getLocation","tiledx","tiledy","theGrild","theGrildx","theGrildy","openisoff","opentheTrap","getChildByName","opacity","NewTrap","theTrapNumber","around","o","Openthezero","Covernumber","rimnumber","rimnumberx","rimnumbery","rimnumber2","therimison","u","TheLatticeX","TheLatticeY","IsOpen","c","aroundagain","q","p","a","b","Again","director","loadScene","GameOver","game","end"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        gatetime: 0,\r\n        Grade: 2,\r\n        NewCoverPrefab: cc.Prefab,\r\n        DKPrefab: cc.Prefab,\r\n        TimeLeft: cc.Node,\r\n        RemainingSpace: cc.Node,\r\n        IntegralNode: cc.Node\r\n    },\r\n\r\n    onLoad() {\r\n        //关卡难度，主要与生成的道具复杂数量有关,1简单、2普通、3困难\r\n        //this.Grade = 2;\r\n        this.trap = 0;\r\n\r\n        //生成矩阵\r\n        var matrix_X_max = 19;\r\n        var matrix_Y_max = 9;\r\n        this.matrix = [];\r\n        for (let x = 0; x <= matrix_X_max; x++) {\r\n            for (let y = 0; y <= matrix_Y_max; y++) {\r\n                let setX = x * 60 + 30;\r\n                let setY = y * 60 + 30;\r\n                this.matrix.push([x, y, setX, setY, false, false, null]);//格子坐标x，格子坐标y，像素坐标x，像素坐标y，是否炸弹，覆盖层判断打开，格子节点\r\n            };\r\n        };\r\n\r\n        //生成炸弹,列表\r\n        if (this.Grade == 1) {\r\n            this.trap = 5;\r\n        }\r\n        if (this.Grade == 2) {\r\n            this.trap = 10;\r\n        }\r\n        if (this.Grade == 3) {\r\n            this.trap = 15;\r\n        };\r\n        let matrix_max = Number(this.matrix.length) - 1;\r\n        this.traplist = [];\r\n        for (let i = 0; i < this.trap; i++) {\r\n            let suijimake = Math.floor(Math.random() * matrix_max) + 1;\r\n            if (this.matrix[suijimake][4]) {\r\n                i += (-1);\r\n            } if (this.matrix[suijimake][4] != true) {\r\n                this.matrix[suijimake][4] = true;\r\n                this.traplist.push([this.matrix[suijimake][2], this.matrix[suijimake][3], this.matrix[suijimake][0], this.matrix[suijimake][1]]);\r\n            };\r\n        };\r\n\r\n        //点击节点\r\n        this.thenode = cc.find('Canvas/Main Display/GridMap');\r\n        //已经打开的列表\r\n        this.openlist = [];\r\n        //打开窗口，限制点击事件\r\n        this.winisopen = false;\r\n        //幽灵数量\r\n        this.IntegralNode.getComponent(cc.Label).string = \"幽灵数量：\" + this.trap;\r\n        //剩余方片数量\r\n        this.RemainingSpace.getComponent(cc.Label).string = \"剩余空格：\" + String(this.matrix.length - this.openlist.length - this.traplist.length);\r\n        //剩余时间\r\n        this.TimeLeft.getComponent(cc.Label).string = \"剩余时间：\" + this.gatetime;\r\n    },\r\n\r\n    start () {\r\n        //生成覆盖\r\n        for (let i = 0; i < this.matrix.length; i++) {\r\n            let NewCover = cc.instantiate(this.NewCoverPrefab);\r\n            NewCover.parent = cc.find('Canvas/Main Display/GridMap');\r\n            NewCover.setPosition(this.matrix[i][2], this.matrix[i][3]);\r\n            this.matrix[i][6] = NewCover;\r\n        };\r\n\r\n        //for (let i = 0; i < this.traplist.length; i++) {\r\n        //    let NewCover = cc.instantiate(this.DKPrefab);\r\n        //    NewCover.parent = cc.find('Canvas/Main Display/GridMap');\r\n        //    NewCover.setPosition(this.traplist[i][0], this.traplist[i][1]);\r\n        //    this.matrix[i][6] = NewCover;\r\n        //};\r\n\r\n        this.theON();\r\n\r\n        var the = this;\r\n        the.schedule(function () {\r\n            if (this.winisopen != true) {\r\n                this.gatetime += (-1);\r\n                this.TimeLeft.getComponent(cc.Label).string = \"剩余时间：\" + this.gatetime;\r\n                if (this.gatetime == 0) {\r\n                    this.winisopen = true;\r\n                };\r\n            };\r\n        }, 1, cc.macro.REPEAT_FOREVER, 0);\r\n    },\r\n\r\n    //开启注册激活\r\n    theON() {\r\n        this.thenode.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            //if (this.winisopen != true) {\r\n            let nodegetLocation = this.thenode.convertToNodeSpaceAR(event.getLocation());\r\n            let tiledx = Math.floor(nodegetLocation.x / 60);\r\n            let tiledy = Math.floor(nodegetLocation.y / 60);\r\n            let theGrild = null;\r\n            let theGrildx = null;\r\n            let theGrildy = null;\r\n            //cc.log(\"点击位置：\" + tiledx + \"\" + tiledy);\r\n            if (this.winisopen != true) {\r\n                //判断是否重复打开\r\n                let openisoff = false;\r\n                for (let i = 0; i < this.openlist.length; i++) {\r\n                    if (tiledx === this.openlist[i][0] && tiledy === this.openlist[i][1]) {\r\n                        openisoff = true;\r\n                        break;\r\n                    };\r\n                };\r\n                //如果未打开，添加该位置到已打开列表\r\n                if (openisoff == false && tiledx >= 0 && tiledy >= 0) {\r\n                    this.openlist.push([tiledx, tiledy]);\r\n                };\r\n                //判断点到的是不是炸弹\r\n                let opentheTrap = false;\r\n                for (let i = 0; i < this.matrix.length; i++) {\r\n                    if (tiledx === this.matrix[i][0] && tiledy === this.matrix[i][1]) {\r\n                        if (this.matrix[i][4]) {\r\n                            opentheTrap = true;\r\n                        };\r\n                        //使覆盖层判断开关打开\r\n                        this.matrix[i][5] = true;\r\n                        theGrild = this.matrix[i][6];\r\n                        theGrildx = this.matrix[i][2];\r\n                        theGrildy = this.matrix[i][3];\r\n                    };\r\n                };\r\n                if (openisoff == false && opentheTrap) {\r\n                    theGrild.getChildByName(\"Cover\").opacity = 0;\r\n                    let NewTrap = cc.instantiate(this.DKPrefab);\r\n                    NewTrap.parent = cc.find('Canvas/Main Display/GridMap');\r\n                    NewTrap.setPosition(theGrildx, theGrildy);\r\n                    this.winisopen = true;\r\n                };\r\n                if (openisoff == false && opentheTrap != true) {\r\n                    theGrild.getChildByName(\"Cover\").opacity = 0;\r\n                    theGrild.getChildByName(\"TheGrid\").opacity = 50;\r\n                    theGrild.getChildByName(\"Number\").opacity = 200;\r\n                    //计算周围炸弹数量\r\n                    var theTrapNumber = 0;\r\n                    let around = [[tiledx - 1, tiledy - 1], [tiledx, tiledy - 1], [tiledx + 1, tiledy - 1],\r\n                        [tiledx - 1, tiledy], [tiledx + 1, tiledy],\r\n                        [tiledx - 1, tiledy + 1], [tiledx, tiledy + 1], [tiledx + 1, tiledy + 1]];\r\n                    for (let i = 0; i < around.length; i++) {\r\n                        for (let o = 0; o < this.matrix.length; o++) {\r\n                            if (around[i][0] == this.matrix[o][0] && around[i][1] == this.matrix[o][1] && this.matrix[o][4]) {\r\n                                theTrapNumber += 1;\r\n                            };\r\n                        };\r\n                    };\r\n                    theGrild.getChildByName(\"Number\").getComponent(cc.Label).string = theTrapNumber;\r\n                    if (theTrapNumber == 0) {\r\n                        theGrild.getChildByName(\"Number\").opacity = 0;\r\n                        this.Openthezero(tiledx, tiledy);\r\n                    };\r\n\r\n\r\n                    //修改方片计数\r\n                    let Covernumber = String(this.matrix.length - this.openlist.length - this.traplist.length);\r\n                    this.RemainingSpace.getComponent(cc.Label).string = \"剩余空格：\" + Covernumber;\r\n                    //消除周围已经8方向打开的数字\r\n                    let rimnumber = [[tiledx - 1, tiledy - 1], [tiledx, tiledy - 1], [tiledx + 1, tiledy - 1],\r\n                        [tiledx - 1, tiledy], [tiledx + 1, tiledy],\r\n                        [tiledx - 1, tiledy + 1], [tiledx, tiledy + 1], [tiledx + 1, tiledy + 1]];\r\n                    for (let o = 0; o < rimnumber.length; o++) {\r\n                        let rimnumberx = rimnumber[o][0];\r\n                        let rimnumbery = rimnumber[o][1];\r\n                        let rimnumber2 = [[rimnumberx - 1, rimnumbery - 1], [rimnumberx, rimnumbery - 1], [rimnumberx + 1, rimnumbery - 1],\r\n                        [rimnumberx - 1, rimnumbery], [rimnumberx + 1, rimnumbery],\r\n                        [rimnumberx - 1, rimnumbery + 1], [rimnumberx, rimnumbery + 1], [rimnumberx + 1, rimnumbery + 1]];\r\n                        let therimison = true;\r\n                        for (let i = 0; i < rimnumber2.length; i++) {\r\n                            for (let u = 0; u < this.matrix.length; u++) {\r\n                                if (rimnumber2[i][0] === this.matrix[u][0] && rimnumber2[i][1] === this.matrix[u][1] && this.matrix[u][5] === false) {\r\n                                    therimison = false;\r\n                                };\r\n                            };\r\n                        };\r\n                        if (therimison) {\r\n                            for (let u = 0; u < this.matrix.length; u++) {\r\n                                if (rimnumberx === this.matrix[u][0] && rimnumbery === this.matrix[u][1]) {\r\n                                    this.matrix[u][6].getChildByName(\"Number\").opacity = 0;\r\n                                };\r\n                            };\r\n                        };\r\n                    };\r\n                };\r\n\r\n                ////完成\r\n                //if (Number(this.openlist.length) == (Number(this.matrix.length) - Number(this.trap)) && opentheTrap != true) {\r\n                //    //音效\r\n                //    //cc.find('permanent/click1bgm').getComponent(cc.AudioSource).play();\r\n                //    this.passthegate = true;\r\n                //    this.winisopen = true;\r\n                //    //cc.find('permanent').getComponent('permanent').passtheGate2 = true;\r\n                //    for (let o = 0; o < this.traplist.length; o++) {\r\n                //        let NewTrap = cc.instantiate(this.NewTrapPrefab);\r\n                //        NewTrap.parent = cc.find('Canvas/tiledmap/appear');\r\n                //        NewTrap.setPosition(this.traplist[o][0], this.traplist[o][1]);\r\n                //    };\r\n                //    let the = this;\r\n                //    the.scheduleOnce(function () {\r\n                //        let win_2Prefab = cc.instantiate(this.win_2Prefab);\r\n                //        win_2Prefab.parent = this.node;\r\n                //        win_2Prefab.setPosition(0, 0);\r\n                //        win_2Prefab.size = 0;\r\n                //        win_2Prefab.getComponent('win_2').tryopacity(255);\r\n                //        win_2Prefab.getComponent('win_2').trysize(1);\r\n                //    }, 0.8);\r\n                //};\r\n                ////音效\r\n                ////cc.find('permanent/click2bgm').getComponent(cc.AudioSource).play();\r\n            };\r\n        }, this);\r\n    },\r\n\r\n    Openthezero(TheLatticeX, TheLatticeY) {\r\n        let around = [[TheLatticeX, TheLatticeY - 1], [TheLatticeX - 1, TheLatticeY], [TheLatticeX, TheLatticeY + 1], [TheLatticeX + 1, TheLatticeY]];\r\n        for (let i = 0; i < around.length; i++) {\r\n            if (around[i][0] >= 0 && around[i][1] >= 0 && around[i][0] <= 19 && around[i][1] <= 9) {\r\n                let IsOpen = false;\r\n                for (let o = 0; o < this.openlist.length; o++) {\r\n                    if (around[i][0] == this.openlist[o][0] && around[i][1] == this.openlist[o][1]) {\r\n                        IsOpen = true;\r\n                    }\r\n                    if (o == this.openlist.length - 1 && IsOpen != true) {\r\n                        let theGrild = null;\r\n                        this.openlist.push([around[i][0], around[i][1]]);\r\n                        for (let c = 0; c < this.matrix.length; c++) {\r\n                            if (around[i][0] === this.matrix[c][0] && around[i][1] === this.matrix[c][1]) {\r\n                                //使覆盖层判断开关打开\r\n                                this.matrix[c][5] = true;\r\n                                theGrild = this.matrix[c][6]\r\n                            };\r\n                        };\r\n\r\n                        let aroundagain = [[around[i][0] - 1, around[i][1] - 1], [around[i][0], around[i][1] - 1], [around[i][0] + 1, around[i][1] - 1],\r\n                        [around[i][0] - 1, around[i][1]], [around[i][0] + 1, around[i][1]],\r\n                        [around[i][0] - 1, around[i][1] + 1], [around[i][0], around[i][1] + 1], [around[i][0] + 1, around[i][1] + 1]];\r\n                        //计算周围炸弹数量\r\n                        let theTrapNumber = 0;\r\n                        for (let q = 0; q < aroundagain.length; q++) {\r\n                            for (let p = 0; p < this.matrix.length; p++) {\r\n                                if (aroundagain[q][0] == this.matrix[p][0] && aroundagain[q][1] == this.matrix[p][1] && this.matrix[p][4]) {\r\n                                    theTrapNumber += 1;\r\n                                };\r\n                            };\r\n                            if (q == aroundagain.length - 1) {\r\n                                theGrild.getChildByName(\"Cover\").opacity = 0;\r\n                                theGrild.getChildByName(\"TheGrid\").opacity = 50;\r\n                                theGrild.getChildByName(\"Number\").opacity = 200;\r\n                                theGrild.getChildByName(\"Number\").getComponent(cc.Label).string = theTrapNumber;\r\n\r\n                                //修改方片计数\r\n                                let Covernumber = String(this.matrix.length - this.openlist.length - this.traplist.length);\r\n                                //消除周围已经8方向打开的数字\r\n                                let rimnumber = [[around[i][0] - 1, around[i][1] - 1], [around[i][0], around[i][1] - 1], [around[i][0] + 1, around[i][1] - 1],\r\n                                [around[i][0] - 1, around[i][1]], [around[i][0] + 1, around[i][1]],\r\n                                [around[i][0] - 1, around[i][1] + 1], [around[i][0], around[i][1] + 1], [around[i][0] + 1, around[i][1] + 1]];\r\n                                for (let a = 0; a < rimnumber.length; a++) {\r\n                                    let rimnumberx = rimnumber[a][0];\r\n                                    let rimnumbery = rimnumber[a][1];\r\n                                    let rimnumber2 = [[rimnumberx - 1, rimnumbery - 1], [rimnumberx, rimnumbery - 1], [rimnumberx + 1, rimnumbery - 1],\r\n                                    [rimnumberx - 1, rimnumbery], [rimnumberx + 1, rimnumbery],\r\n                                    [rimnumberx - 1, rimnumbery + 1], [rimnumberx, rimnumbery + 1], [rimnumberx + 1, rimnumbery + 1]];\r\n                                    let therimison = true;\r\n                                    for (let b = 0; b < rimnumber2.length; b++) {\r\n                                        for (let u = 0; u < this.matrix.length; u++) {\r\n                                            if (rimnumber2[b][0] === this.matrix[u][0] && rimnumber2[b][1] === this.matrix[u][1] && this.matrix[u][5] === false) {\r\n                                                therimison = false;\r\n                                            };\r\n                                        };\r\n                                    };\r\n                                    if (therimison) {\r\n                                        for (let u = 0; u < this.matrix.length; u++) {\r\n                                            if (rimnumberx === this.matrix[u][0] && rimnumbery === this.matrix[u][1]) {\r\n                                                this.matrix[u][6].getChildByName(\"Number\").opacity = 0;\r\n                                            };\r\n                                        };\r\n                                    };\r\n                                };\r\n                            };\r\n                            if (q == aroundagain.length - 1 && theTrapNumber == 0) {\r\n                                theGrild.getChildByName(\"Number\").opacity = 0;\r\n                                this.Openthezero(around[i][0], around[i][1]);\r\n                            }\r\n                        };\r\n                    }\r\n                };\r\n            };\r\n        };\r\n    },\r\n\r\n    Again(){\r\n        cc.director.loadScene(\"Scene/GhostArrest\");\r\n    },\r\n\r\n    GameOver() {\r\n        cc.game.end();\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}